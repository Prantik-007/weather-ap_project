<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Weather Now</title>
<style>
    :root{
      --bg:#0f172a;       /* slate-900 */
      --card:#111827;     /* gray-900 */
      --muted:#94a3b8;    /* slate-400 */
      --text:#e5e7eb;     /* gray-200 */
      --accent:#22d3ee;   /* cyan-400 */
      --danger:#ef4444;   /* red-500 */
      --ok:#10b981;       /* emerald-500 */
    }
    *{ box-sizing:border-box; }
    body{
    margin:0; min-height:100svh; font-family:system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Arial, "Apple Color Emoji", "Segoe UI Emoji";
    background: radial-gradient(1200px 800px at 70% 10%, #0b1226, var(--bg));
    color:var(--text);
    display:grid; place-items:center; padding:24px;
    }
    .app{
    width:100%; max-width:680px; background:linear-gradient(180deg, rgba(34,211,238,0.07), rgba(34,211,238,0.02)), var(--card);
    border:1px solid rgba(255,255,255,0.06); border-radius:18px; box-shadow:0 10px 40px rgba(0,0,0,0.35);
    padding:22px; backdrop-filter: blur(6px);
    }
    .header{ display:flex; align-items:center; gap:12px; margin-bottom:18px; }
    .logo{
    width:40px; height:40px; border-radius:12px; display:grid; place-items:center; background:rgba(34,211,238,0.12);
    border:1px solid rgba(34,211,238,0.35); font-weight:700; color:var(--accent);
    }
    h1{ font-size:1.25rem; margin:0; letter-spacing:0.2px; }

    form{ display:flex; gap:10px; }
    input[type="text"]{
    flex:1; padding:14px 14px; border-radius:12px; border:1px solid rgba(255,255,255,0.08);
    background:#0b1328; color:var(--text); outline:none;
    }
    input::placeholder{ color:var(--muted); }
    button{
    padding:12px 16px; border-radius:12px; border:1px solid rgba(34,211,238,0.5); background:rgba(34,211,238,0.12);
    color:var(--accent); font-weight:600; cursor:pointer; transition: transform .05s ease, background .2s ease;
    }
    button:active{ transform: translateY(1px); }

    .status{ margin:12px 2px 0; font-size:.95rem; color:var(--muted); min-height:1.2em; }

    .card{
    margin-top:18px; border-radius:16px; border:1px solid rgba(255,255,255,0.06); padding:18px;
    background:rgba(255,255,255,0.03);
    }
    .row{ display:flex; gap:16px; align-items:center; flex-wrap:wrap; }
    .temp{
    font-size:3rem; font-weight:800; letter-spacing:-1px;
    }
    .condition{ display:flex; align-items:center; gap:8px; font-size:1.05rem; color:var(--muted); }
    .meta{ display:grid; grid-template-columns: repeat(2, minmax(0,1fr)); gap:12px; margin-top:14px; }
    .kv{
    background:rgba(255,255,255,0.03); border:1px solid rgba(255,255,255,0.06); border-radius:12px; padding:12px;
    display:flex; align-items:center; justify-content:space-between;
    }
    .kv .k{ color:var(--muted); font-size:.9rem; }
    .kv .v{ font-weight:700; }

    .hidden{ display:none !important; }
    .error{ color:var(--danger); }
    .ok{ color:var(--ok); }
    footer{ margin-top:10px; font-size:.8rem; color:var(--muted); text-align:center; }
    a{ color:var(--accent); text-decoration:none; }
</style>
</head>
<body>
<div class="app" role="application" aria-label="Weather app">
    <div class="header">
    <div class="logo">☁️</div>
    <div>
        <h1>Weather Now</h1>
        <div class="status" id="status">Enter a city, postal code, or latitude,longitude (e.g., 51.5072,-0.1276)</div>
    </div>
    </div>

    <form id="form" autocomplete="off" aria-label="Search city">
    <input id="locationInput" type="text" placeholder="e.g., London, Kolkata, 10001, 51.5072,-0.1276" aria-label="Location" />
    <button id="searchBtn" type="submit">Get Weather</button>
    </form>

    <section id="result" class="card hidden" aria-live="polite">
    <div class="row">
        <div>
        <div id="place" style="font-weight:700; font-size:1.15rem;">—</div>
        <div id="time" class="condition">—</div>
        <div class="temp" id="temp">—</div>
        <div class="condition"><img id="icon" alt="" width="36" height="36" /> <span id="text">—</span></div>
        </div>
    </div>

    <div class="meta">
        <div class="kv"><span class="k">Feels like</span><span class="v" id="feels">—</span></div>
        <div class="kv"><span class="k">Humidity</span><span class="v" id="humidity">—</span></div>
        <div class="kv"><span class="k">Wind</span><span class="v" id="wind">—</span></div>
        <div class="kv"><span class="k">AQI (PM2.5)</span><span class="v" id="pm25">—</span></div>
    </div>
    </section>

    <footer>
    Data from <a href="https://www.weatherapi.com/" target="_blank" rel="noreferrer noopener">WeatherAPI</a>
    </footer>
</div>

<script>
    const API_BASE = 'http://api.weatherapi.com/v1/current.json';
    const API_KEY = '946eb6a74f504250a5c181814252808'; // Provided by you

    const els = {
    form: document.getElementById('form'),
    input: document.getElementById('locationInput'),
    status: document.getElementById('status'),
    result: document.getElementById('result'),
    place: document.getElementById('place'),
    time: document.getElementById('time'),
    temp: document.getElementById('temp'),
    icon: document.getElementById('icon'),
    text: document.getElementById('text'),
    feels: document.getElementById('feels'),
    humidity: document.getElementById('humidity'),
    wind: document.getElementById('wind'),
    pm25: document.getElementById('pm25'),
    };

    function setStatus(msg, kind=''){
    els.status.textContent = msg;
    els.status.className = 'status ' + kind;
    }

    function show(el){ el.classList.remove('hidden'); }
    function hide(el){ el.classList.add('hidden'); }

    async function fetchWeather(q){
    const url = `${API_BASE}?key=${API_KEY}&q=${encodeURIComponent(q)}&aqi=yes`;
    setStatus('Loading…');
    try {
        const res = await fetch(url);
        if(!res.ok){
        const text = await res.text();
        throw new Error(`API error ${res.status}: ${text}`);
        }
        const data = await res.json();
        renderWeather(data);
        setStatus('Success ✓', 'ok');
    } catch (err){
        console.error(err);
        setStatus('Could not load weather. Check the location and try again.', 'error');
        hide(els.result);
    }
    }

    function renderWeather(d){
    const loc = d.location || {}; const cur = d.current || {};
    els.place.textContent = `${loc.name || '—'}, ${loc.region || ''} ${loc.country || ''}`.replace(/,\s+,/g, ',').trim();
    els.time.textContent = `Local time: ${loc.localtime || '—'}`;
    els.temp.textContent = typeof cur.temp_c === 'number' ? `${cur.temp_c.toFixed(1)}°C / ${(cur.temp_f).toFixed(1)}°F` : '—';
    if(cur.condition){
        els.text.textContent = cur.condition.text || '—';
        els.icon.src = `https:${cur.condition.icon}`;
        els.icon.alt = cur.condition.text || 'Condition icon';
    } else {
        els.text.textContent = '—';
        els.icon.removeAttribute('src');
        els.icon.alt = '';
    }
    els.feels.textContent = typeof cur.feelslike_c === 'number' ? `${cur.feelslike_c.toFixed(1)}°C` : '—';
    els.humidity.textContent = typeof cur.humidity === 'number' ? `${cur.humidity}%` : '—';
    els.wind.textContent = (typeof cur.wind_kph === 'number' ? `${cur.wind_kph} kph` : '—') + (cur.wind_dir ? ` ${cur.wind_dir}` : '');
    const pm = d?.current?.air_quality?.pm2_5;
    els.pm25.textContent = typeof pm === 'number' ? pm.toFixed(1) : '—';
    show(els.result);
    }

    // Handle submit
    els.form.addEventListener('submit', (e)=>{
    e.preventDefault();
    const q = els.input.value.trim();
    if(!q){ setStatus('Please enter a location.', 'error'); return; }
    fetchWeather(q);
    });

    // Optional: run an initial fetch for a nice first view
    window.addEventListener('DOMContentLoaded', ()=>{
    const hashQ = decodeURIComponent(location.hash.replace(/^#/, ''));
    if(hashQ){ els.input.value = hashQ; fetchWeather(hashQ); }
    });
</script>
</body>
</html>
